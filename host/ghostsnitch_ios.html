<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GhostSnitch iOS</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #000;
            color: #0f0;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            color: #f00;
            text-align: center;
        }
        .info {
            margin: 10px 0;
            padding: 10px;
            background: #111;
            border-left: 3px solid #0f0;
            border-radius: 4px;
        }
        .status {
            color: #ff0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçé GhostSnitch iOS</h1>
        <div id="output"></div>
    </div>

    <script>
        const output = document.getElementById('output');
        
        function addInfo(text, className = '') {
            const div = document.createElement('div');
            div.className = `info ${className}`;
            div.textContent = text;
            output.appendChild(div);
        }

        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 1.0;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;
                // iOS Safari requires user interaction for speech synthesis
                window.speechSynthesis.speak(utterance);
                addInfo(`üîä ${text}`, 'status');
            } else {
                addInfo(`üì¢ ${text}`);
            }
        }

        async function getDeviceInfo() {
            const userAgent = navigator.userAgent || 'Unknown';
            const platform = navigator.platform || 'Unknown';
            const vendor = navigator.vendor || 'Unknown';
            
            // Extract iOS version
            const iosMatch = userAgent.match(/OS (\d+)[._](\d+)/);
            const iosVer = iosMatch ? `${iosMatch[1]}.${iosMatch[2]}` : 'Unknown';
            
            // Detect device model from user agent
            let deviceModel = 'iPhone';
            if (userAgent.includes('iPad')) deviceModel = 'iPad';
            else if (userAgent.includes('iPod')) deviceModel = 'iPod';
            
            const deviceInfo = `You're using an ${deviceModel} running iOS ${iosVer}. Brave, but foolish.`;
            speak(deviceInfo);
            addInfo(`üì± Device: ${deviceModel} (iOS ${iosVer})`);
            addInfo(`üîß Platform: ${platform}`);
            addInfo(`üè¢ Vendor: ${vendor}`);
        }

        function getRAMInfo() {
            if ('deviceMemory' in navigator) {
                const ram = navigator.deviceMemory;
                speak(`This device has approximately ${ram} gigabytes of RAM. That's cute.`);
                addInfo(`üíæ RAM: ${ram} GB`);
            } else {
                // iOS doesn't expose deviceMemory, but we can estimate based on device
                const userAgent = navigator.userAgent || '';
                let estimatedRAM = 'Unknown';
                
                // Rough estimates based on device type
                if (userAgent.includes('iPhone')) {
                    estimatedRAM = '4-6 GB (typical iPhone)';
                } else if (userAgent.includes('iPad')) {
                    estimatedRAM = '4-16 GB (typical iPad)';
                }
                
                speak(`I can't see your exact RAM, but it's probably around ${estimatedRAM}. That's cute.`);
                addInfo(`üíæ RAM: ${estimatedRAM} (estimated)`);
            }
        }

        function getBatteryInfo() {
            if ('getBattery' in navigator) {
                navigator.getBattery().then(battery => {
                    const level = Math.round(battery.level * 100);
                    const charging = battery.charging ? 'charging' : 'not charging';
                    speak(`Your battery is at ${level} percent and ${charging}. Keep it charged, will you?`);
                    addInfo(`üîã Battery: ${level}% (${charging})`);
                }).catch(() => {
                    speak("Couldn't check your battery. Probably dead anyway.");
                    addInfo('üîã Battery: Unknown');
                });
            } else {
                speak("Couldn't access battery info. Your device is being secretive.");
                addInfo('üîã Battery: Unknown');
            }
        }

        async function getIPInfo() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                speak(`Your public IP is ${data.ip}. And I know where you live now.`);
                addInfo(`üåê IP: ${data.ip}`);
            } catch (error) {
                try {
                    const response = await fetch('https://icanhazip.com');
                    const ip = await response.text().trim();
                    speak(`Your public IP is ${ip}. And I know where you live now.`);
                    addInfo(`üåê IP: ${ip}`);
                } catch (e) {
                    speak("Couldn't fetch your IP address. Probably hiding behind a VPN. Smart move.");
                    addInfo('üåê IP: Unknown');
                }
            }
        }

        function getNetworkInfo() {
            if ('connection' in navigator) {
                const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                if (conn) {
                    const type = conn.effectiveType || conn.type || 'Unknown';
                    const downlink = conn.downlink || 'Unknown';
                    const rtt = conn.rtt || 'Unknown';
                    speak(`Your network connection is ${type} with ${downlink} megabits per second. Weak sauce.`);
                    addInfo(`üì∂ Network: ${type} (${downlink} Mbps, RTT: ${rtt}ms)`);
                } else {
                    speak("Couldn't find your network info. Hiding, huh?");
                    addInfo('üì∂ Network: Unknown');
                }
            } else {
                speak("Couldn't access network info. Your device is being secretive.");
                addInfo('üì∂ Network: Unknown');
            }
        }

        function getLocationHint() {
            if ('geolocation' in navigator) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude.toFixed(2);
                        const lon = position.coords.longitude.toFixed(2);
                        const accuracy = Math.round(position.coords.accuracy);
                        speak(`I know your location is approximately ${lat}, ${lon}. And I know where you live now.`);
                        addInfo(`üìç Location: ${lat}, ${lon} (accuracy: ${accuracy}m)`);
                    },
                    (error) => {
                        if (error.code === error.PERMISSION_DENIED) {
                            speak("Couldn't get your location. Privacy settings are actually working for once.");
                        } else {
                            speak("Location services unavailable. Can't spy on your location.");
                        }
                        addInfo(`üìç Location: ${error.message || 'Blocked'}`);
                    }
                );
            } else {
                speak("Location services not available. Can't spy on your location.");
                addInfo('üìç Location: Not available');
            }
        }

        function getLanguageInfo() {
            const languages = navigator.languages || [navigator.language];
            const primaryLang = languages[0] || 'Unknown';
            speak(`You're using ${primaryLang} as your language. Fancy.`);
            addInfo(`üåç Languages: ${languages.join(', ')}`);
        }

        function getScreenInfo() {
            const width = window.screen.width;
            const height = window.screen.height;
            const pixelRatio = window.devicePixelRatio || 1;
            speak(`Your screen is ${width} by ${height} pixels. Nice resolution, I guess.`);
            addInfo(`üì∫ Screen: ${width}x${height} (${pixelRatio}x pixel ratio)`);
        }

        // Main execution
        async function main() {
            // Request necessary permissions early
            if ('geolocation' in navigator) {
                // Geolocation will be requested when needed
            }
            
            speak("Hello iOS user. Let's begin.");
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            getDeviceInfo();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            getRAMInfo();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            getBatteryInfo();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            await getIPInfo();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            getNetworkInfo();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            getScreenInfo();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            getLanguageInfo();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            getLocationHint();
            await new Promise(resolve => setTimeout(resolve, 2500));
            
            speak("GhostSnitch iOS signing off. Sleep tight.");
            addInfo('‚úÖ Execution complete', 'status');
        }

        // Start when page loads
        // iOS Safari requires user interaction for speech, so we'll try anyway
        window.addEventListener('load', () => {
            setTimeout(main, 1000);
        });
        
        // Also try on first user interaction (tap/click)
        document.addEventListener('click', () => {
            if (!window.started) {
                window.started = true;
                main();
            }
        }, { once: true });
    </script>
</body>
</html>

